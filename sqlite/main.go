package main

import (
	"database/sql"
	"fmt"
	_ "github.com/mattn/go-sqlite3"
	"log"
)

func main() {
	db, _ := sql.Open("sqlite3", "/Users/arick/Library/Application Support/Cursor/User/globalStorage/state.vscdb")
	defer db.Close()

	re, err := db.Query("SELECT value FROM \"main\".\"ItemTable\" WHERE \"key\" LIKE '%applicationUser%'")
	log.Println(re, err)
	defer re.Close()
	for re.Next() {
		var value []byte // BLOB 对应 []byte

		err = re.Scan(&value)
		if err != nil {
			panic(err)
		}

		fmt.Printf(" Value: %s\n", string(value))
	}

	//str := "{\"cursorCreds\":{\"cppBackendUrl\":\"https://api3.cursor.sh\",\"websiteUrl\":\"https://cursor.com\",\"backendUrl\":\"https://api2.cursor.sh\",\"authClientId\":\"KbZUR41cY7W6zRSdpSUJ7I7mLYBKOCmB\",\"authDomain\":\"prod.authentication.cursor.sh\",\"repoBackendUrl\":\"https://repo42.cursor.sh\",\"contextBankUrl\":\"https://repo42.cursor.sh\",\"telemBackendUrl\":\"https://api3.cursor.sh\",\"cmdkBackendUrl\":\"https://api3.cursor.sh\",\"geoCppBackendUrl\":\"https://api4.cursor.sh\",\"cppConfigBackendUrl\":\"https://api4.cursor.sh\",\"bcProxyUrl\":\"https://api2.cursor.sh\",\"credentialsDisplayName\":\"Prod\"},\"cppEnabled\":true,\"composerState\":{\"alwaysKeepComposerInBound\":true,\"location2\":\"pane\",\"nonBarLocation\":\"pane\",\"nonBarChatLocation\":\"pane\",\"chatLocation\":\"pane\",\"hasMigratedChatLocation\":true,\"hasMigratedComposerGlobalConfigsToModeSpecificConfigs\":true,\"hasMigratedToAgentIsCmdI\":true,\"defaultCapabilities\":[],\"barAnchor\":\"center\",\"autoApplyFilesOutsideContext\":true,\"shouldAutoContinueToolCall\":false,\"defaultMode2\":\"agent\",\"useYoloMode\":false,\"yoloPrompt\":\"\",\"yoloCommandAllowlist\":[],\"yoloCommandDenylist\":[],\"yoloMcpToolsDisabled\":false,\"preferDiffInChat\":true,\"useStaticContextBank\":false,\"defaultUseToolsInEdit\":false,\"unification2\":true,\"unification12_useReactiveUnificationModeInstead\":\"merged\",\"shouldReviewChanges\":\"enabled\",\"wasBarPreviouslyOpen\":false,\"doNotShowYoloModeWarningAgain\":false,\"selectedFakeStreamerId\":null,\"yoloDeleteFileDisabled\":false,\"yoloDotFilesDisabled\":true,\"yoloOutsideWorkspaceDisabled\":true,\"webViewerAllowNonLocalhost\":false,\"isWebSearchToolEnabled\":true,\"isWebSearchToolEnabled2\":false,\"isWebSearchToolEnabled3\":null,\"autoAcceptWebSearchTool\":false,\"backgroundComposerEnv\":\"dev\",\"areSearchToolsEnabledForAskMode\":true,\"includeProjectLayout\":false,\"modes4\":[{\"id\":\"agent\",\"name\":\"Agent\",\"actionId\":\"composerMode.agent\",\"icon\":\"infinity\",\"description\":\"Plan, search, make edits, run commands\",\"thinkingLevel\":\"none\",\"shouldAutoApplyIfNoEditTool\":true,\"autoFix\":true,\"autoRun\":false,\"enabledTools\":[],\"enabledMcpServers\":[]},{\"id\":\"chat\",\"name\":\"Ask\",\"actionId\":\"composerMode.chat\",\"icon\":\"chat\",\"description\":\"Ask Cursor questions about your codebase\",\"thinkingLevel\":\"none\",\"shouldAutoApplyIfNoEditTool\":false,\"autoFix\":true,\"autoRun\":false,\"enabledTools\":[],\"enabledMcpServers\":[]},{\"id\":\"edit\",\"name\":\"Manual\",\"actionId\":\"composerMode.edit\",\"icon\":\"targetTwo\",\"description\":\"Manually decide what gets added to the context (no tools)\",\"thinkingLevel\":\"none\",\"shouldAutoApplyIfNoEditTool\":true,\"autoFix\":true,\"autoRun\":false,\"enabledTools\":[],\"enabledMcpServers\":[]},{\"id\":\"background\",\"name\":\"Background\",\"actionId\":\"composerMode.background\",\"icon\":\"cloudTwo\",\"description\":\"Create background agent\",\"thinkingLevel\":\"none\",\"shouldAutoApplyIfNoEditTool\":false,\"autoFix\":false,\"autoRun\":false,\"enabledTools\":[],\"enabledMcpServers\":[]}],\"codeBlockDisplayPreference\":\"expanded\",\"thinkingLevel\":\"none\",\"composerMigrationVersion\":104,\"hasShownBackgroundComposerModalControlPanelHint\":false},\"mcpServers\":[],\"mcpDisabledTools\":[],\"availableDefaultModels2\":[{\"defaultOn\":true,\"name\":\"claude-3.5-sonnet\",\"supportsAgent\":true}],\"notepadState\":{\"isNotepadEnabled\":true},\"bugbotState\":{\"preferredModelName\":\"o1-preview\"},\"backgroundComposerState\":{},\"dialogDontAskAgainPreferences\":{},\"aiFeaturesCopyPasteState\":{\"mentions\":[]},\"cursorIgnore\":{\"hierarchicalEnabled\":false},\"teamAdminSettings\":{\"cursorIgnore\":{\"hierarchicalEnabled\":false}},\"shouldShowViewZoneWhenPreviewBoxIsClipped6\":false,\"syncDevModeColorTheme\":true,\"cppModelsState\":{\"cppModels\":[\"main\",\"turbo\"],\"defaultCppModel\":\"main\"},\"isLinterEnabled\":false,\"aiSettings\":{\"openAIModel\":\"deepseek-r1:14b\",\"regularChatModel\":\"deepseek-r1:14b\",\"cmdKModel\":\"deepseek-r1:14b\",\"terminalCmdKModel\":\"deepseek-r1:14b\",\"composerModel\":\"claude-3.5-sonnet\",\"backgroundComposerModel\":\"o3\",\"longContextOpenAIModel\":\"claude-3-5-sonnet-200k\",\"composerPreviousNonDefaultModel\":\"claude-3.5-sonnet\",\"modelsWithNoDefaultSwitch\":[],\"modelDefaultSwitchOnNewChat\":false,\"completedModelMigrations\":[],\"modelSettingToMaxMode\":{\"background-composer\":true},\"teamIds\":[],\"modelOverrideDisabled\":[\"claude-3.5-sonnet\",\"claude-3-haiku-20240307\",\"claude-3-opus-20240229\",\"claude-3-sonnet-20240229\",\"gemini-1.5-flash\",\"gemini-1.5-flash-8b\",\"gemini-2.0-flash-exp\"],\"modelOverrideEnabled\":[\"deepseek-r1:14b\"]},\"authenticationSettings\":{\"githubLoggedIn\":false},\"docState\":{\"visibleDocs\":[],\"usableDocs\":[],\"previosulyUsedDocs\":[]},\"lastUpdateHiddenTimeInUnixSeconds\":0,\"lintRules\":\"\",\"bubbleTimesLeft\":1,\"showAgentActionDebugger\":false,\"cmdLineHookState\":{\"ignored\":false,\"timesShown\":1,\"remindLaterDate\":\"1747907637893\"},\"showLinterDebugger\":false,\"linterDebuggerState\":{\"specificRules\":true,\"compileErrors\":false,\"changeBehavior\":true,\"matchCode\":false,\"relevance\":true,\"userAwareness\":true},\"cacheChatPrompts\":true,\"cmdkDiffHistoryEnabled\":false,\"shouldOnlyImportOnAccept\":true,\"cppAutoImportDecorationStyle\":\"squiggle\",\"lintSettings\":{\"forceEnableDiscriminators\":[],\"forceDisableDiscriminators\":[],\"forceEnableGenerators\":[],\"forceDisableGenerators\":[],\"watcherThreshold\":0.2,\"watcherDebounceTimeSeconds\":30,\"runOnSaveInstead\":true,\"silenceIfOverlappingWithRegularLinter\":true},\"lastUpgradeToProNotificationTime\":0,\"haveNotSeen\":{\"chat\":true,\"submit\":true,\"context\":true},\"newUserData\":{\"toolUsageCount\":{\"plainChat\":0,\"contextChat\":0,\"intentChat\":0}},\"azureState\":{\"useAzure\":true,\"baseUrl\":\"https://ry559-mazgxkqq-eastus2.cognitiveservices.azure.com\",\"deployment\":\"gpt-4.1\",\"apiKey\":\"7DWocsBaZfI9BRk5ZHtqXOLcBYlhQbzW7irOn3Ukt1KEwatqj5lpJQQJ99BEACHYHv6XJ3w3AAAAACOGs87H\"},\"interpreterModeSettings\":{\"interpreterModeByDefault\":false},\"cppFireOnEveryCursorChange\":false,\"personalDocs\":[],\"cppInCmdF\":true,\"cppManualTriggerWithOpToken\":false,\"cppTriggerInComments\":true,\"cppShowWhitespaceOnlyChanges\":false,\"fastCppEnabled\":false,\"indexRepository\":true,\"haveNotImportedFromVSC\":false,\"shouldAutoParseCmdKLinks\":false,\"aiPreviewsEnabled\":true,\"autoCreateNewChatAfterTimeout\":true,\"aiPreviewSettings\":{\"enabledFeatures\":{\"summary\":true,\"relatedFiles\":true,\"relatedCommits\":true},\"summary\":{\"isExpanded\":true},\"relatedFiles\":{\"isExpanded\":true},\"relatedCommits\":{\"isExpanded\":false}},\"chatFadeInAnimationEnabled\":false,\"isFileSyncClientEnabled\":true,\"useFastApplyModel\":false,\"fastApplyModelType\":1,\"explicitlyEnableSemanticSearch\":false,\"aiCursorHelpEnabled\":true,\"showAllCmdKContexts\":false,\"backgroundComposerEnv\":\"prod\",\"markdownTestString\":\"\",\"cppInPeek\":true,\"fastSemanticSearchEnabled\":false,\"preferredEmbeddingModel\":0,\"cursorPredictionUIExperiments\":[],\"oneTimeSettings\":{\"shouldDisableGithubCopilot\":true,\"shouldMigrateFromGpt4ToGpt4o\":false,\"shouldMigrateFromGpt4oToClaudeSonnet\":true,\"didMigrateFromGpt4oToClaudeSonnet\":true,\"didMigrateBackFromClaudeSonnetToGpt4o\":false,\"didMigrateFromMaxModelNames\":false,\"hasAcceptedMaxModeConfirmation\":false},\"indexingState\":{\"lastAskedToIndexTime\":0},\"internalAnalyticsDebugMode\":false,\"fullContextOptions\":{\"compress\":true,\"hasDismissed\":false},\"eligibleForSnippetLearning\":true,\"goneThroughCodeSnippetOnboarding\":true,\"goneThroughCodeSnippetChangeManagement\":false,\"membershipType\":\"free\",\"hasBedrockIamRole\":false,\"teamBlockRepos\":[],\"teamAllowRepos\":[],\"teamBlocklist\":[],\"havePerformedSettingsServiceMigration\":true,\"lastComposerOpenTime\":1747907337773,\"shouldNotTryToGetThemToNoticeCpp\":true,\"checklistState\":{\"shouldSeeOnboardingChecklist\":true},\"cppHasLoadedConfigFromCopilot\":true,\"SPECIAL_KEY_id\":\"a77260f3-f34d-4beb-8576-5d4fc0a4a7d7\",\"hasDisabledErrorLensForAiLinter\":true,\"cursorPredictionState\":{\"modelConfigs\":[{\"name\":\"legacy\",\"radius\":80},{\"name\":\"default\",\"radius\":50},{\"name\":\"v2\",\"radius\":1000},{\"name\":\"v3\",\"radius\":1000}],\"defaultModel\":\"default\",\"heuristics\":[1]},\"onboardingDataPrivacyVersion\":\"new\",\"enoughTimeElapsedSinceOnboarding\":true,\"noStorageMode\":true,\"openAIBaseUrl\":\"http://127.0.0.1:8081/v1\",\"useOpenAIKey\":true,\"useClaudeKey\":true,\"useGoogleKey\":true}"
	//_, err = db.Exec("UPDATE \"main\".\"ItemTable\" SET value = ? WHERE \"key\" LIKE '%applicationUser%'", []byte(str))
	if err != nil {
		log.Println(err)
		panic(err)
	}
}
